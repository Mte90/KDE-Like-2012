/*!
 * forkit.js 0.2
 * http://lab.hakim.se/forkit-js
 * MIT licensed
 *
 */(function(){function s(b){a.curtain&&c===g&&(b.preventDefault(),dragY=b.clientY,dragTime=Date.now(),dragging=!0)}function t(b){mouse.x=b.clientX;mouse.y=b.clientY}function u(){c!==e&&(c=j,dragging=!1)}function v(b){a.curtain&&(b.preventDefault(),c===e?k():300>Date.now()-dragTime&&(dragging=!1,c=e))}function w(b){b.preventDefault();k()}function x(){c===e&&(curtainCurrentY=curtainTargetY=window.innerHeight)}function k(){dragging=!1;c=j;a.ribbonTag.innerHTML=h}function p(){var b=q(mouse.x,mouse.y,window.innerWidth, 0);c===e?curtainTargetY=Math.min(curtainTargetY+0.2*(window.innerHeight-curtainTargetY),window.innerHeight):(b<1.5*i?(c=g,a.ribbonTag.innerHTML=r):!dragging&&(c===g&&b>2*i)&&k(),dragging)?(curtainTargetY=Math.max(mouse.y-dragY,0),curtainTargetY>window.innerHeight*y&&(dragging=!1,c=e)):curtainTargetY*=0.8;curtainCurrentY+=0.3*(curtainTargetY-curtainCurrentY);if(dragging||c===g){velocity/=z;velocity+=gravity;var b=a.ribbon.offsetLeft,f=Math.max(0.2*(mouse.x-b-closedX),-l);anchorB.x+=0.1*(closedX+f- anchorB.x);anchorB.y+=velocity;f=q(anchorA.x,anchorA.y,anchorB.x,anchorB.y);f>l&&(velocity-=Math.abs(f)/(1.25*l));f=Math.max(mouse.y-anchorB.y,0);b=Math.min(130,Math.max(50,180*Math.atan2(f,mouse.x-(b+anchorB.x))/Math.PI));rotation+=0.1*(b-rotation)}else c===e?(anchorB.x+=0.2*(openedX-anchorB.x),anchorB.y+=0.2*(openedY-anchorB.y),rotation+=0.02*(90-rotation)):(anchorB.x+=0.2*(anchorA.x-anchorB.x),anchorB.y+=0.2*(anchorA.y-anchorB.y),rotation+=0.2*(45-rotation));a.curtain&&(a.curtain.style.top=-100+ Math.min(100*(curtainCurrentY/window.innerHeight),100)+"%");a.ribbon.style[m("transform")]=n(0,curtainCurrentY,0);a.ribbonTag.style[m("transform")]=n(anchorB.x,anchorB.y,rotation);b=180*Math.atan2(anchorB.y-anchorA.y,anchorB.x-anchorA.x)/Math.PI;a.ribbonString.style.width=anchorB.y+"px";a.ribbonString.style[m("transform")]=n(anchorA.x,0,b);requestAnimFrame(p)}function m(b,a){for(var c=b.slice(0,1).toUpperCase()+b.slice(1),o=0,e=VENDORS.length;o<e;o++){var d=VENDORS[o];if("undefined"!==typeof(a||document.body).style[d+ c])return d+c}return b}function n(b,a,c){return"translate("+b+"px,"+a+"px) rotate("+c+"deg)"}function q(b,a,c,d){b-=c;a-=d;return Math.sqrt(b*b+a*a)}function d(b,a){this.x=b||0;this.y=a||0}var j=0,g=1,e=2,i=200,l=40,y=0.36;VENDORS=["Webkit","Moz","O","ms"];var a={ribbon:null,ribbonString:null,ribbonTag:null,curtain:null,closeButton:null},c=j,h="",r="",z=1.04;gravity=1.5;closedX=0.4*i;closedY=-15;openedX=0.4*i;openedY=30;velocity=0;rotation=45;curtainCurrentY=curtainTargetY=0;dragging=!1;dragY=dragTime= 0;anchorA=new d(closedX,closedY);anchorB=new d(closedX,closedY);mouse=new d;d.prototype.distanceTo=function(b,a){var c=b-this.x,d=a-this.y;return Math.sqrt(c*c+d*d)};d.prototype.clone=function(){return new d(this.x,this.y)};d.prototype.interpolate=function(a,c,d){this.x+=(a-this.x)*d;this.y+=(c-this.y)*d};window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}; a.ribbon=document.querySelector(".forkit");a.curtain=document.querySelector(".forkit-curtain");a.closeButton=document.querySelector(".forkit-curtain .close-button");a.ribbon&&(h=a.ribbon.getAttribute("data-text")||"",r=a.ribbon.getAttribute("data-text-detached")||h,a.ribbon.innerHTML='<span class="string"></span><span class="tag">'+h+"</span>",a.ribbonString=a.ribbon.querySelector(".string"),a.ribbonTag=a.ribbon.querySelector(".tag"),a.ribbon.addEventListener("click",v,!1),document.addEventListener("mousemove", t,!1),document.addEventListener("mousedown",s,!1),document.addEventListener("mouseup",u,!1),window.addEventListener("resize",x,!1),a.closeButton&&a.closeButton.addEventListener("click",w,!1),p())})();